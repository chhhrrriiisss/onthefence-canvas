define("Scene",["Clouds","Hills","Bale","Sheep","Parallax","Hammer"],function(e,t,s,a,i,r){var n;return n={ready:!1,assets:{},enter:function(e){switch(e){case"explore":this.explore()}},explore:function(){this.ready||console.log("Scene properties not set!");var t=this;canvas=this.properties.canvas,stage=this.properties.stage,this.stage=stage,this.canvas=canvas,assets=this.assets,createjs.Ticker.on("tick",this.tick,this),createjs.Ticker.setFPS(60);var r=this.assets.hillsFar,n=this.assets.hillsMed,h=this.assets.bale,o=this.assets.clouds;window.disableScroll=!1;var p=this.assets.data,l=[];for(var c in p){var d=p[c];l.push(d)}this.bales=new Object,this.bales.graphics=new createjs.Container;for(var u=0;u<l.length;u++){var g=-4e3+8e3*Math.random(),w=550+100*Math.random();bale=new s(g,w,h,l[u]),bale.x=g,bale.y=w,this.bales.graphics.addChild(bale.graphics)}this.parallaxLayers=[],t.parallaxLayers.hillMed=new i(this,0,parseInt(stage.canvas.height-n.height),n,1,10,!0),t.parallaxLayers.hillFar=new i(this,-2e3,parseInt(stage.canvas.height-r.height)-25,r,.5,10,!0),this.cloudLayer=new e(o),this.sheep=new a(stage.canvas.width/2,stage.canvas.height/2+100,this.assets.sheep_face,this.assets.sheep_body,this.assets.sheep_legs),t.parallaxLayers.bales=new i(this,1e3,600,this.bales,1,10),t.parallaxLayers.clouds=new i(this,0,0,this.cloudLayer,.5,10),t.parallaxLayers.sheep=new i(this,0,0,this.sheep,1.5,10),stage.addChild(this.parallaxLayers.clouds.graphics,this.parallaxLayers.hillFar.graphics,this.parallaxLayers.hillMed.graphics,t.parallaxLayers.bales.child.graphics,this.sheep.graphics),this.addHooks()},initialize:function(e){this.properties=e,this.ready=!0},"goto":function(){},set:function(e,t){this.properties[e]=t},get:function(e){return this.properties[e]},update:function(){var e=this.properties["target-x"],t=this.properties["viewport-x"];if(e!=t){var s=this.properties["target-x"]-this.properties["viewport-x"],a=this.properties.easing;this.newX=Math.round(s/a)}else this.newX="";""!=this.newX&&(this.properties["viewport-x"]+=this.newX)},addHooks:function(){r(document).on("swipeleft",function(){n.viewport.nudge(-1e3)}),r(document).on("swiperight",function(){n.viewport.nudge(1e3)}),$(document).on("keydown",function(e){switch(e.which||e.keyCode){case 39:n.viewport.nudge(-10);break;case 37:n.viewport.nudge(10)}}),$("#mainCanvas").on("mousewheel",function(e){var t=e.originalEvent.wheelDelta;t>0?n.viewport.nudge(-400):0>t&&n.viewport.nudge(400)})},tick:function(e){n.update(),this.sheep.tick(),this.cloudLayer.tick();for(var t in this.parallaxLayers)this.parallaxLayers[t].tick();this.stage.update(e)},viewport:{x:function(){return n.properties["viewport-x"]},y:function(){return n.properties["viewport-y"]},width:function(){return n.properties.width},targetX:function(){return n.properties["target-x"]},targetY:function(){return n.properties["target-y"]},nudge:function(e,t){window.disableScroll||(e&&(n.properties["target-x"]+=e),t&&(n.properties["target-y"]+=t))}}}});