define("Scene",["Clouds","Hills","Bale","Parallax","Hammer"],function(e,t,s,i,a){var r;return r={ready:!1,assets:{},enter:function(e){switch(e){case"explore":this.explore()}},explore:function(){this.ready||console.log("Scene properties not set!");var t=this;canvas=this.properties.canvas,stage=this.properties.stage,this.stage=stage,this.canvas=canvas,assets=this.assets,createjs.Ticker.on("tick",this.tick,this),createjs.Ticker.setFPS(60);var a=this.assets.hillsFar,r=this.assets.hillsMed,n=this.assets.bale,o=this.assets.clouds;window.disableScroll=!1,this.parallaxLayers=[],t.parallaxLayers.hillMed=new i(this,0,parseInt(stage.canvas.height-r.height),r,1,10,!0),t.parallaxLayers.hillFar=new i(this,-2e3,parseInt(stage.canvas.height-a.height)-25,a,.5,10,!0),this.cloudLayer=new e(o),this.baleLayer=new s(700,600,n),t.parallaxLayers.bale=new i(this,1e3,0,this.baleLayer,1,10),t.parallaxLayers.clouds=new i(this,0,0,this.cloudLayer,.5,10),stage.addChild(this.parallaxLayers.clouds.graphics,this.parallaxLayers.hillFar.graphics,this.parallaxLayers.hillMed.graphics,t.parallaxLayers.bale.graphics),this.addHooks()},initialize:function(e){this.properties=e,this.ready=!0},"goto":function(){},set:function(e,t){this.properties[e]=t},get:function(e){return this.properties[e]},update:function(){var e=this.properties["target-x"],t=this.properties["viewport-x"];if(e!=t){var s=this.properties["target-x"]-this.properties["viewport-x"],i=this.properties.easing;this.newX=Math.round(s/i)}else this.newX="";""!=this.newX&&(this.properties["viewport-x"]+=this.newX)},addHooks:function(){a(document).on("swipeleft",function(){r.viewport.nudge(-1e3)}),a(document).on("swiperight",function(){r.viewport.nudge(1e3)}),$(document).on("keydown",function(e){switch(e.which||e.keyCode){case 39:r.viewport.nudge(-10);break;case 37:r.viewport.nudge(10)}}),$("#mainCanvas").on("mousewheel",function(e){var t=e.originalEvent.wheelDelta;t>0?r.viewport.nudge(-400):0>t&&r.viewport.nudge(400)})},tick:function(e){r.update(),this.cloudLayer.tick();for(var t in this.parallaxLayers)this.parallaxLayers[t].tick();this.stage.update(e)},viewport:{x:function(){return r.properties["viewport-x"]},y:function(){return r.properties["viewport-y"]},width:function(){return r.properties.width},targetX:function(){return r.properties["target-x"]},targetY:function(){return r.properties["target-y"]},nudge:function(e,t){window.disableScroll||(e&&(r.properties["target-x"]+=e),t&&(r.properties["target-y"]+=t))}}}});