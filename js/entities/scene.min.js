define("Scene",["Clouds","Hills","Bale","Parallax","Hammer"],function(e,t,a,s,i){var r;return r={ready:!1,assets:{},enter:function(e){switch(e){case"explore":this.explore()}},explore:function(){this.ready||console.log("Scene properties not set!");var t=this;canvas=this.properties.canvas,stage=this.properties.stage,this.stage=stage,this.canvas=canvas,assets=this.assets,createjs.Ticker.on("tick",this.tick,this),createjs.Ticker.setFPS(60);var i=this.assets.hillsFar,r=this.assets.hillsMed,n=this.assets.bale,o=this.assets.clouds;window.disableScroll=!1,this.parallaxLayers=[],t.parallaxLayers.hillMed=new s(this,0,parseInt(stage.canvas.height-r.height),r,1,10,!0),t.parallaxLayers.hillFar=new s(this,-2e3,parseInt(stage.canvas.height-i.height)-25,i,.5,10,!0),this.cloudLayer=new e(o),this.baleLayer=new a(0,0,n),this.bales=new Object,this.bales.graphics=new createjs.Container;for(var l=0;10>l;l++){var h=-1e3+2e3*Math.random(),p=600+100*Math.random();bale=new a(h,p,n),bale.x=h,bale.y=p,this.bales.graphics.addChild(bale)}console.log(this.bales.graphics),t.parallaxLayers.bale=new s(this,1e3,600,this.baleLayer,1,10),t.parallaxLayers.bales=new s(this,1e3,600,this.bales,1,10),t.parallaxLayers.clouds=new s(this,0,0,this.cloudLayer,.5,10),console.log(t.parallaxLayers.bales),stage.addChild(this.parallaxLayers.clouds.graphics,this.parallaxLayers.hillFar.graphics,this.parallaxLayers.hillMed.graphics,this.parallaxLayers.bale.graphics),this.addHooks()},initialize:function(e){this.properties=e,this.ready=!0},"goto":function(){},set:function(e,t){this.properties[e]=t},get:function(e){return this.properties[e]},update:function(){var e=this.properties["target-x"],t=this.properties["viewport-x"];if(e!=t){var a=this.properties["target-x"]-this.properties["viewport-x"],s=this.properties.easing;this.newX=Math.round(a/s)}else this.newX="";""!=this.newX&&(this.properties["viewport-x"]+=this.newX)},addHooks:function(){i(document).on("swipeleft",function(){r.viewport.nudge(-1e3)}),i(document).on("swiperight",function(){r.viewport.nudge(1e3)}),$(document).on("keydown",function(e){switch(e.which||e.keyCode){case 39:r.viewport.nudge(-10);break;case 37:r.viewport.nudge(10)}}),$("#mainCanvas").on("mousewheel",function(e){var t=e.originalEvent.wheelDelta;t>0?r.viewport.nudge(-400):0>t&&r.viewport.nudge(400)})},tick:function(e){r.update(),this.cloudLayer.tick();for(var t in this.parallaxLayers)this.parallaxLayers[t].tick();this.stage.update(e)},viewport:{x:function(){return r.properties["viewport-x"]},y:function(){return r.properties["viewport-y"]},width:function(){return r.properties.width},targetX:function(){return r.properties["target-x"]},targetY:function(){return r.properties["target-y"]},nudge:function(e,t){window.disableScroll||(e&&(r.properties["target-x"]+=e),t&&(r.properties["target-y"]+=t))}}}});